syntax = "proto3";

package tolymer.v1;

import "google/protobuf/empty.proto";

service Events {
  rpc GetEvent (GetEventRequest) returns (Event);
  rpc CreateEvent (CreateEventRequest) returns (Event);
  rpc UpdateEvent (UpdateEventRequest) returns (Event);

  rpc CreateGame (CreateGameRequest) returns (Game);
  rpc UpdateGame (UpdateGameRequest) returns (Game);
  rpc DeleteGame (DeleteGameRequest) returns (google.protobuf.Empty);

  rpc CreateTip (CreateTipRequest) returns (Tip);
  rpc UpdateTip (UpdateTipRequest) returns (Tip);
  rpc DeleteTip (DeleteTipRequest) returns (google.protobuf.Empty);
}

message Date {
  int32 year = 1;
  int32 month = 2;
  int32 day = 3;
}

message CreateEventRequest {
  string title = 1;
  string description = 2;
  Date date = 3;
  repeated string participants = 4;
}

message GetEventRequest {
  string event_token = 1;
}

message UpdateEventRequest {
  Event event = 1;
}

message CreateGameRequest {
  string event_token = 1;
  repeated Score scores = 2;
}

message UpdateGameRequest {
  string event_token = 1;
  Game game = 2;
}

message DeleteGameRequest {
  string event_token = 1;
  int64 game_id = 2;
}

message CreateTipRequest {
  string event_token = 1;
  repeated Tip tips = 2;
}

message UpdateTipRequest {
  string event_token = 1;
  repeated Tip tips = 2;
}

message DeleteTipRequest {
  string event_token = 1;
}

message Event {
  string token = 1;
  string title = 2;
  string description = 3;
  Date date = 4;
  repeated Participant participants = 5;
  repeated Game games = 6;
  repeated Tip tips = 7;
}

message Participant {
  int64 id = 1;
  string name = 2;
}

message Game {
  int64 id = 1;
  string event_token = 2;
  repeated Score scores = 3;
}

message Score {
  int64 participant_id = 1;
  float point = 2;
}

message Tip {
  int64 participant_id = 1;
  float point = 2;
}
